# Vim 快捷键

Vim 快捷键实在太多了，这里只记录一些常用的。

> [!NOTE|label:注意]
> 当没有 `Ctrl` 或 `Alt` 在前时，快捷键区分大小写，即 `A` 代表 `Shift + A`。

## NORMAL

- `i/I`: 在光标/行首前进入 INSERT 模式
- `a/A`: 在光标/行末后进入 INSERT 模式
- `o/O`: 在下/上一行进入 INSERT 模式

> [!TIP|label:提示]
> 进入 INSERT 模式前输入数字即可重复键入，比如 `5a` 输入希望重复键入的字符、单词或句子，回到 NORMAL 模式后自动重复键入。

### 移动

- `k/j/h/l`: 光标上/下/左/右/移动（左右仅限于行内）
- `Backspace`: 光标左移（可以行间）
- `0/$`: 光标移到行首/行末
- `Enter`: 光标移到下一行行首
- `gg`: 光标移到首行
  - `数字 + gg`：光标移到某行，比如 `17gg` 即移到第17行
- `G`: 光标移到末行
- `w/b`：光标移到下/上一个单词开头
- `%`：光标移到对称标点处
- `{/}`：光标移到段落开头/结尾（空行处）
- `gt/gT`：光标移到下/上一个标签页

> [!ATTENTION|label:注意]
> 以上操作都可以在前面加数字已达到多次键入的效果。唯独 `gt` 不太一样，`数字 + gt` 的效果是光标移到从左往右数第几个标签页。

- `gd`: 去到函数或变量定义的地方
- `Ctrl + O`：光标移到跳转前的位置
- `m + 标记`：在当前光标处添加标记，标记可以为任意字符，<code>` + 标记</code> 可以将光标移到标记处，比如 <code>mm</code> 可以在当前光标处添加一个名为 <code>m</code> 的标记

- `Space + Space`：开启 easymotion（如果无效需要设定 leader 键）
  - `s + 字符`：单字符跳跃（支持中文）
  - `/ + 字符 + Enter`：多字符跳跃
  - `j/k`：行跳跃（向下/向上）

### 查找

- `f + 字符`: 查找行内字符，按 `;/,` 查找下/上一个
- `*`: 查找光标所在单词
- `/ + 字符 + Enter`: 多字符查找，按 `n/N` 查找下/上一个
- `Ctrl + N`: 取消查找后的高亮
- `gb`：选中光标所在单词，再按一次选中下一个相同单词，并进入 MULTICURSOR 模式，可以选中多个批量修改

### 同质操作符

- `d`: 剪切
- `c`: 剪切并进入 INSERT 模式
- `y`: 复制

这三个操作符在 NORMAL 模式下是不能单独使用的，以下为它们的用法：

- `叠词`: 对整行进行操作
  - `dd`: 剪切整行
- `数字 + 叠词`: 对指定数量的行进行操作
  - `2yy`: 复制2行
- `操作符 + i + w`: 对光标所在单词进行操作
  - `ciw`: 剪切当前单词并进入 INSERT 模式
- `操作符 + w/b`: 对光标所在单词且在光标后/前的部分进行操作
  - `dw/db`: 删除当前单词后/前半部分
- `操作符 + i + 对称标点`: 对标点内的部分（不包括标点本身）进行操作
  - `yi'`: 复制单引号中的内容

  > [!TIP|label:提示]
  > 对称标点包括：`''`、`""`、`()`、`[]`、`{}`、`` ` ` ``、`<>`、`<> <>`。其中小括号可以用 `b` 代替，大括号可以用 `B` 代替，标签用 `t` 表示。

- `操作符 + a + 对称标点`: 对标点内的部分（包括标点本身）进行操作，代替同上
  - `cab`: 剪切小括号与小括号中的内容并进入INSERT模式
- `操作符 + 0`：对当前光标到行首进行操作（不包括当前光标）
  - `d0`：删除当前光标前到行首的内容
- `操作符 + $`：对当前光标到行首进行操作（包括当前光标）
  - `y$`：复制当前光标到行末的内容
- `操作符 + i + e`：对全文进行操作
  - `cie`：剪切全文并进入 INSERT 模式

### 其他常用操作

- `p/P`: 在光标后/前粘贴
- `x`: 剪切光标选中的字符
- `s`: 剪切光标选中的字符并进入 INSERT 模式
- `r + 字符`：替换光标选中的字符为指定字符
- `~`：将光标选中的字符替换大小写
- `u`：undo，撤回到上一个 NORMAL 模式下的状态
- `Ctrl + R`：redo，撤回刚刚执行的撤回
- `gcc`：注释或取消注释当前行
  - `数字 + gcc`：注释或取消注释若干行
- `gh`: 模拟鼠标悬浮

- **surround**
  - `ysiw + 对称标点`：在单词两边添加对称标点
  - `yss + 对称标点`：在整行两边添加对称标点
  - `cs + 要修改的对称标点 + 要添加的对称标点`：将单词两边的对称标点修改成想要的
  - `ds + 对称标点`：删除单词两边的对称标点

    > [!TIP|label:提示]
    > 对称标点中，使用左半边会让标点与内容中间多出一个空格，使用右半边则不会，例如：`ysiw + [` 会呈现 `[ 内容 ]` 而 `ysiw + ]` 则会呈现 `[内容]`。
    > 
    > 一个例外是 `<>`，使用左半边是输入标签模式，使用右半边则代表普通的尖括号。

- `v/V`: 选中当前光标/光标所在行并进入 VISUAL/VISUAL LINE 模式

> [!TIP|label:提示]
> 以上操作符均可以加数字前缀达到选中多个或操作多次的效果。

- `Ctrl + V`: 进入 VISUAL-BLOCK 模式，可批量操作

### 屏幕滚动与代码块隐藏

- `zz`：屏幕滚动使当前行在屏幕中间
- `zc`：隐藏代码块
- `zo`：打开代码块
- `Ctrl + U`：向上滚动半屏
- `Ctrl + D`：向下滚动半屏

### 寄存器

- `" + 寄存器`：访问寄存器（a~z），后面可以加复制、删除或粘贴命令
- `: + reg`：查看寄存器情况
- `q + 寄存器 + 操作 + q`：在该寄存器下录制宏
- `@ + 寄存器`：执行该寄存器中的宏

> 给自己定个规矩，复制的一律从 `a` 往后存，宏存到 `q` 下。

### 正则匹配

- `:%s/要修改的字符串/修改后的结果`：批量修改字符串

#### 中括号匹配

- `[a-z]/[A-Z]`：匹配小写/大写字母

  > [!NOTE|label:注意]
  > 当忽略大小写时，前者会连同大写字母一同匹配，后者则不会匹配小写字母。

- `[0-9]`：匹配数字
- `[^...]`：排除匹配

#### 反斜杠匹配

- `\w/\W`：匹配字母/非字母
- `\d/\D`：匹配数字/非数字
- `\s/\S`：匹配空格/非空格

> [!NOTE|label:注意]
> 当忽略大小写时，后者作用与前者相同。

#### 其他匹配

- `^/$`：匹配行首/尾
- `.`：匹配任意字符
- `&/|`：与/或匹配

#### 常用组合匹配

- `\w(\s|\W)`：匹配英文单词

### 设置

- `:set ignorecase`：忽略大小写
- `:set noignorecase`：大小写敏感

## INSERT

- `jj`: 进入 NORMAL 模式（如果无效则需要改默认 keybinding）

## VISUAL

- 同 NORMAL 中的移动光标操作（包括查找）
- 同样可以使用 `d, y, c` 与寄存器等操作
- `S + 对称标点`：在选中的文本两端添加对称标点
- `v/Esc`: 退出并进入 NORMAL 模式

## VISUAL LINE

- 操作同 VISUAL
- `v`：进入 VISUAL 模式
- `Esc`: 退出并进入 NORMAL 模式

## VISUAL-BLOCK

- 同 NORMAL 中的移动光标操作（包括查找）
- 同样可以使用 `d, y, c` 等操作
- `I`: 在所有光标前进入 MULTICURSOR 模式
- `A`: 在所有光标后进入 MULTICURSOR 模式
- `Esc`: 退出并进入 NORMAL 模式

## MULTICURSOR

- `Esc`: 退出并进入 NORMAL 模式